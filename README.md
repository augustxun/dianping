## 项目背景

本项目的项目原型是黑马点评，黑马点评是一款类似于大众点评等打卡类 APP 的点评类项目。实现了短信登陆、探店点评、优惠券秒杀、每日签到、好友关注、粉丝关注博主后，主动推送博主的相关博客等多个模块。 用户可以浏览首页的推荐内容，搜索附近的商家，查看商家的详情和评价以及发表探店博客，抢购商家发布的限时秒杀商品。

本项目在原型基础上做了诸多优化：

优化点 1：秒杀商品时可能会因为访问量太大导致系统崩溃，用 RateLimiter 基于令牌桶算法进行**限流**，当峰值流量达到阈值时，对后续的请求进行**降级**，降级方案为：返回排队页面、错误页等；

优化点 2：为了将秒杀请求拦截在上游，避免请求压到数据层导致读写锁冲突严重、超时等问题，对下单业务设置三级缓冲：分别是 1.本地标记；2.Redis 预处理； 3.RabbitMQ异步下单，最后才会访问数据库

优化点 ：Redis 宕机的降级策略asd



### 秒杀系统的业务特点有什么？

高并发：秒杀的特点就是这样时间极短、 瞬间用户量大。

库存量少：一般秒杀活动商品量很少，这就导致了只有极少量用户能成功购买到。

业务简单：流程比较简单，一般都是下订单、扣库存、支付订单

恶意请求，数据库压力大



## 秒杀下单模块设计

### 接口限流

### 异步下单

### 流量削峰